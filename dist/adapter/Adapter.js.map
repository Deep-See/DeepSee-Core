{"version":3,"file":"Adapter.js","sourceRoot":"","sources":["../../src/adapter/Adapter.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;GAaG;;AAKH;;GAEG;AACH,MAAa,OAAO;IAsCnB,YACC,EAAU,EACV,IAAY,EACZ,WAAmB,EACnB,OAAe,EACf,SAAiB,EAAE,EACnB,OAAiB,EAAE,EACnB,mBAA4C,EAAE,EAC9C,KAAc,EACd,YAAqB,KAAK;QAE1B,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC5B,CAAC;IAED;;OAEG;IACH,OAAO,CAAC,EAAmB;QAC1B,CAAC,UAAS,EAAmB,EAAE,SAAiB,EAAE,MAAc;YAC/D,IAAI,CAAC,SAAS,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IAC7B,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,UAAU,CAAC,GAAQ;QACzB,IAAI,OAAO,GAAG,KAAK,QAAQ;YAAE,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEnD,OAAO,IAAI,OAAO,CACjB,GAAG,CAAC,EAAE,EACN,GAAG,CAAC,IAAI,EACR,GAAG,CAAC,WAAW,EACf,GAAG,CAAC,OAAO,EACX,GAAG,CAAC,MAAM,EACV,GAAG,CAAC,IAAI,EACR,GAAG,CAAC,gBAAgB,EACpB,GAAG,CAAC,KAAK,EACT,GAAG,CAAC,SAAS,CACb,CAAC;IACH,CAAC;CACD;AAxFD,0BAwFC","sourcesContent":["/**\n *  Copyright 2019 The Adaptive Web. All Rights Reserved.\n *\n *  Licensed under the Mozilla Public License 2.0 (the \"License\").\n *  You may not use this file except in compliance with the License.\n *  A copy of the License is located at\n *\n *      https://www.mozilla.org/en-US/MPL/2.0/\n *\n *  or in the \"license\" file accompanying this file. This file is distributed\n *  on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *  express or implied. See the License for the specific language governing\n *  permissions and limitations under the License.\n */\n\nimport { IAdapterContext } from './AdapterContext';\nimport { AdapterPreferenceSchema } from './AdapterPreferenceSchema';\n\n/**\n * Adapters are adaptive modules to be injected into the page.\n */\nexport class Adapter {\n\t/**\n\t * The unique id of this adapter.\n\t */\n\tid: string;\n\t/**\n\t * The name of the adapter.\n\t */\n\tname: string;\n\t/**\n\t * A user friendly description of this adapter.\n\t */\n\tdescription: string;\n\t/**\n\t * Longer user friendly description (supports Markdown formatting) of the adapter.\n\t */\n\tabout?: string;\n\t/**\n\t * The version string.\n\t */\n\tversion: string;\n\t/**\n\t * The preference schema for this adapter.\n\t */\n\tpreferenceSchema: AdapterPreferenceSchema;\n\t/**\n\t * The script itself. Represented as a string to allow for an eval call after being injected into the page.\n\t */\n\tscript: string;\n\t/**\n\t * Tags that this adapter\n\t */\n\ttags: string[];\n\t/**\n\t * Determines if this adapter is a developer mode adapter\n\t */\n\tdeveloper: boolean;\n\n\tconstructor(\n\t\tid: string,\n\t\tname: string,\n\t\tdescription: string,\n\t\tversion: string,\n\t\tscript: string = '',\n\t\ttags: string[] = [],\n\t\tpreferenceSchema: AdapterPreferenceSchema = {},\n\t\tabout?: string,\n\t\tdeveloper: boolean = false\n\t) {\n\t\tthis.id = id;\n\t\tthis.name = name;\n\t\tthis.description = description;\n\t\tthis.version = version;\n\t\tthis.script = script;\n\t\tthis.tags = tags;\n\t\tthis.preferenceSchema = preferenceSchema;\n\t\tthis.about = about;\n\t\tthis.developer = developer;\n\t}\n\n\t/**\n\t * Executes the adapter code.\n\t */\n\texecute(aw: IAdapterContext) {\n\t\t(function(aw: IAdapterContext, rawScript: string, window: Window) {\n\t\t\teval(rawScript);\n\t\t})(aw, this.script, window);\n\t}\n\n\t/**\n\t * Creates an instance of an Adapter from an object or string.\n\t * @param obj the object to initiate from. Can be either a JSON string or object.\n\t */\n\tstatic fromObject(obj: any): Adapter {\n\t\tif (typeof obj === 'string') obj = JSON.parse(obj);\n\n\t\treturn new Adapter(\n\t\t\tobj.id,\n\t\t\tobj.name,\n\t\t\tobj.description,\n\t\t\tobj.version,\n\t\t\tobj.script,\n\t\t\tobj.tags,\n\t\t\tobj.preferenceSchema,\n\t\t\tobj.about,\n\t\t\tobj.developer\n\t\t);\n\t}\n}\n"]}